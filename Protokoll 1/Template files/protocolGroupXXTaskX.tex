\documentclass{ifacconf}

\usepackage{natbib}            % you should have natbib.sty
\usepackage[utf8]{inputenc}    % Eingabe von Umlauten im Editor, dieser sollte dann auch auf utf8 Encoding eingestellt sein
\usepackage{graphicx}          % Include this line if your 
                               % document contains figures,
%\usepackage[dvips]{epsfig}    % or this line, depending on which
                               % you prefer.
                               
\usepackage{units}

% for German
% \usepackage{ngerman}           % neue Deutsche Rechtschreibung, Silbentrennung
% \usepackage[T1]{fontenc}       % Trennung mit Umlauten

% to include tikz pictures of figure created with matlab2tikz, see also file ``plotFigureTest.m''
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}  % use newest version of pgfplots
\usepackage{amsmath}  % useful for math

% to include the legend into the caption. The commands are
%\mlLineLegend{red}
%\mlLineLegendDashed{red}
%\mlLineLegendDotted{red}
%\mlLineLegendDashDotted{red}
%\mlPointLegend{red}
\newlength{\mlLegendThickness}
\setlength{\mlLegendThickness}{0.4mm}
\newlength{\mlLegendHeight}
\setlength{\mlLegendHeight}{0.6ex}
\newcommand{\mlLineLegend}[1]{\mbox{\color{#1}
\protect\rule[\mlLegendHeight]{3mm}{\mlLegendThickness}\hspace*{-1mm}
}}
\newcommand{\mlLineLegendDashed}[1]{\mbox{\color{#1}
\protect\rule[\mlLegendHeight]{1.5mm}{\mlLegendThickness}\hspace*{0mm}
\protect\rule[\mlLegendHeight]{1.5mm}{\mlLegendThickness}\hspace*{-1mm}
}}
\newcommand{\mlLineLegendDotted}[1]{\mbox{\color{#1}
\protect\rule[\mlLegendHeight]{0.4mm}{\mlLegendThickness}\hspace*{0mm}
\protect\rule[\mlLegendHeight]{0.4mm}{\mlLegendThickness}\hspace*{0mm}
\protect\rule[\mlLegendHeight]{0.4mm}{\mlLegendThickness}\hspace*{0mm}
\protect\rule[\mlLegendHeight]{0.4mm}{\mlLegendThickness}\hspace*{-1mm}
}}
\newcommand{\mlLineLegendDashDotted}[1]{\mbox{\color{#1}
\protect\rule[\mlLegendHeight]{1.5mm}{\mlLegendThickness}\hspace*{0mm}
\protect\rule[\mlLegendHeight]{0.4mm}{\mlLegendThickness}\hspace*{0mm}
\protect\rule[\mlLegendHeight]{1.5mm}{\mlLegendThickness}\hspace*{0mm}
\protect\rule[\mlLegendHeight]{0.4mm}{\mlLegendThickness}\hspace*{-1mm}
}}
\newcommand{\mlPointLegend}[1]{\mbox{\color{#1}
\protect\rule[\mlLegendHeight]{0.4mm}{\mlLegendThickness}\hspace*{-0.75mm}
}}

\begin{document}

\begin{frontmatter}

\title{KRT Praktikum: Protokoll 1 - L1 und H1}

\thanks[footnoteinfo]{Institute for Systems Theory and Automatic Control, University of Stuttgart, Germany. \textit{http://www.ist.uni-stuttgart.de}}

% include all authors, underline corresponding author
\author{Kimon Beyer, Yves Gaßmann, Justin Buhl} 
% \author{}

\begin{abstract}                          % Abstract of not more than 250 words.
In diesem ersten Protokoll handelt es sich um eine Zusammenfassung des Vorgehens der Gruppe AWe1 des Praktikums "Konzepte der Regelungstechnik" am Institut für Systemtheorie und Regelungstechnik der Universität Stuttgart. In diesem ersten Protokoll werden die Ergebnisse von L1 und H1 dargestellt, wobei sich der erste Teil um L1 handelt und der zweite Teil um H1. Während sich L1 mit der Betriebnahme des Versuchsstandes beschäftigt, wird im anschließenden H1 Teil die Modellierung des 3DOF Helikopters durchgeführt, mit abschließender Respektive auf die in L2 zu erledigende Modellidentifizierung.
\end{abstract}

\end{frontmatter}

\section{Einleitung}
In diesem Protokoll werden die Ergebnisse der ersten Laboraufgabe (L1) und der ersten Hausaufgabe (H1) des 
Praktikums "Konzepte der Regelungstechnik" am Institut für Systemtheorie und Regelungstechnik der Universität Stuttgart zusammengefasst. Ziel von L1 ist es, den Versuchsstand in Betrieb zu nehmen und die grundlegenden Funktionen zu verstehen. H1 konzentriert sich auf die Modellierung des 3DOF Helikopters, um eine Grundlage für die anschließende Modellidentifizierung in L2 zu schaffen.
Beim zu regelnden Versuchsstand handelt es sich um einen 3DOF Helikopter, der entlang seiner Hauptachsen/Gelenkachsen (Travel angle, elevation angle, pitch angle) bewegt werden kann.
Die Bewegung um die Achsen wird dabei durch zwei Elektromotoren ermöglicht.
Ziel des Praktikums ist es eine vorgegebene Trajektorie innerhalb einer gewissen Zeit abzufliegen und dabei die jeweiligen 
Beschränkungen einzuhalten. Dabei wird im folgenden die Inbetriebnahme des Versuchsstandes 
beschrieben und die Modellierung des Helikopters durchgeführt. Dieses Modell wird im laufenden 
Praktikum genutzt um ein Regelerentwurf durchzuführen und am Teststand zu implementieren. 

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.8\columnwidth]{Helikopter.pdf} % Pfad/Dateiname anpassen
    \caption{Versuchsstand: 3DOF-Helikopter. Besteht aus Haupt- und Nebenarm, sowie Gegengewicht 
    und am Ende des Arms befindlichen Helikopter.}
    \label{fig:helikopter}
\end{figure}

\section{Erster Labortag (L1)}

Um den Versuchsstand in Betrieb zu nehmen wird die "Quanser Quarc" Schnittstelle, eien Erweiterung für Matlab/Simulink, verwendet.
Diese Schnittstelle ermöglicht es, die Hardware mit Matlab Simulink zu verbinden und die Motoren/Signale über die
jeweilige Blöcke anzusteuern und auszulesen. Über einen "Write Analog" Block werden die zwei 12V Motoren 
die zur verfügung stehen, sowie der Magnet angesteuert. Der Magnet wird benötigt um das Verfrachten einer Metallkugel
als Teil der Praktikumsendaufgabe zu ermöglichen. Eine Spannungsdifferenz an den Motoren ermöglicht nun die Steuerung des
Pitch Winkels und somit auch des travel Angels. An diesem Block kann auch der "Game Controler" angeschlossen werden, mittels dem 
der Versuchsstand manuell angesteuert werden kann. Dafür muss jedoch eine möglichst intuitive Bedienung mit passender Skalierung 
der Eingabewerte implementiert werden. Dafür könnte an dieser Stelle noch ein PID-Controler implementiert werden. 
Der "Read Encoder" Block ermöglicht das Auslesen der Winkelinkremente der drei Achsen der verbauten Encoder, die relativ zur Ausgangsposition gemessen werden.
Diese Winkelinkremente müssen noch umgerechent und mit richtigem Vorzeiuchen versehen werden, um die 
nötigen Konventionen von Rechtshandsystemen und der Modellbildung zu gewährleisten. 
Diese Blöcke werden letztendlich in 3 Simulink Subsystems unterteilt, "Input Generation", "Data acquisition" und "Plant". 
Die Plant soll dabei durch ein Modell des Helikopters ersetzen werden können. Im Subsystem "Input generation" 
der Write Digital/Analog Block sowie der Game Controler zusammen gefasst. Im Subsystem "Data acquisition" werden die Encoderwerte ausgelesen und aufbereitet.

\section{Erste Hausaufgabe (H1)}
Für die Modellierung des 3DOF Helikopters wurde versucht eine möglichst einfache Modellannahme zu treffen 
um die komplexität des Modells gering zu halten und mit einem möglichst überschaubaren Zeitaufwand 
eine möglichst gute Abbildung des Systemverhaltens zu extrahieren. Zunächst war nämlich geplant,
den Versuchsstand in SolidWorks zu modellieren und mit anschließenden Matlab tools die Systemgleichungen 
zu extrahieren. Dies hat jedoch zu Problemen geführt, wordurch eine erfolgreiche Extraktion 
der Modellgleichungen leider ausblieb. Dennoch wurde das Modell genutzt um Modellparameter zu extrahieren. 
Darauf wird noch im Weiteren eingegangen. Für die physikalische Modellbildung wurde nun zunächst die Grundannahme getroffen,
die einzelnen Achsen des Helikopters unabhängig voneinander zu betrachten. Die 
Dynamik der einzelnen Achsen ergibt sich dann durch das Momentengleichgewicht und dem Drallsatz.
\begin{equation}
M_{\mathrm{ges}} = M_{\mathrm{grav}} + M_{\mathrm{motor}}
\label{eq:momentengleichgewicht}
\end{equation}
\begin{equation}
M = I*\ddot{\Phi}
\label{eq:rotational_dynamics}
\end{equation}
Dabei bezeichnet $M_{\mathrm{ges}}$ das gesamte Moment, $M_{\mathrm{grav}}$ das durch die Gravitationkraft verursachte Moment
und $M_{\mathrm{motor}}$ das durch die Motoren erzeugte Moment. $I$ ist das Trägheitsmoment der jeweiligen Achse und $\ddot{\Phi}$ die jeweilige
Winkelbeschleunigung um die betrachtete Achse. Die Dynamik der drei Rotationen um die jeweilige Achse ergibt sich
letztendlich durch zweifache Integration der Winkelbeschleunigung. 

Als Grundannahme betrachten wir die einzelnen rotationen Einzeln. D.h wir betrachten für jede
Rotationen einen gesamten Starrkörper. Das heist für den Pitch Winkel um die Pitch Achse, bewegt sich lediglich
der Helikopter als Starrkörper. Für die Bewegung um die Elevation Achse, betrachten wir den Helikopter und
einen gesamten Arm (d.h Hauptarm, Magnethalterung, Nebenarm und Gegengewicht wird alles als ein starrer Körper betrachtet), beides zusammen als Starrkörper mit lediglich einem Freiheitsgrad um die Elevation Achse. 
Für die Bewegung um die Travel Achse, betrachten wir nun den Helikopter, einen Arm und einen zusätzlichen vertikalen Arm, 
alle drei Teile als ein starrer Starrkörper mit einem Freiheitsgrad um die Travel Achse. 

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.9\columnwidth]{heli.png}
    \caption{CAD Modell des Helikopters}
    \label{fig:bild1}
\end{figure}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.9\columnwidth]{arm_heli.png}
    \caption{CAD Modell des Helikopters mit Arm}
    \label{fig:bild2}
\end{figure}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.9\columnwidth]{arm_heli_staender.png}
    \caption{CAD Modell des Helikopters mit Arm und Ständer.}
    \label{fig:bild3}
\end{figure}


Des Weiteren wurden folgende Annahmen getroffen:
\begin{itemize}
    \item Reibungen sowie Luftwiderstände werden vernachlässigt.
    \item Der Schwerpunkt des Helikopters selbst liegt im Rotationspunkt der Drehachse. Diese Symmetrie
    hat zur Folge, dass für die Pitch Achse kein Gravitationsmoment berücksichtigt werden müssen, da sich 
    die Gewichtskräfte gegenseitig aufheben.

\end{itemize}
Zur Extrahierung der Massenträgheitsmomente wurden die in Abbildungen~\ref{fig:bild1},~\ref{fig:bild2} und~\ref{fig:bild3} gezeigten CAD-Modelle aus SolidWorks genutzt.
Es ist wichtig zu erwähnen, dass die jeweiligen Massenträgheiten in den jeweiligen Koordinatensystemen der Rotationsachsen extrahiert wurden sind.
Dabei wurden folgende Massenträgheiten extrahiert sowie mit folgenden Längen als
Hebelarme des Starrkörpers festgelegt:

\begin{table}[htbp]
\centering
\caption{Modelparameter}
\label{tab:modelparams}
\begin{tabular}{|c|c|p{4.5cm}|}
\hline
Variable & Wert & Beschreibung \\ \hline
$I_{\alpha}$ & 1.130985 [kg/m$^2$] & Trägheitsmoment um die Travel-Achse \\ \hline
$I_{\beta}$  & 1.125115 [kg/m$^2$] & Trägheitsmoment um die Elevation-Achse \\ \hline
$I_{\gamma}$ & 0.040229 [kg/m$^2$] & Trägheitsmoment um die Pitch-Achse. \\ \hline
$m_{\mathrm{mmp}}$ & 3.960 [kg] & Gesamte Masse des 3DOF Helikopters mit Hauptarm \\ \hline
\end{tabular}
\end{table}

\begin{table}[htbp]
\centering
\caption{Gegebene Längen}
\label{tab:modellengths}
\begin{tabular}{|c|c|p{5cm}|}
\hline
Variable & Wert & Beschreibung \\ \hline
$l_{heli}$ & 0.655 [m] & Länge vom Aufhängepunkt zur Rotorbaugruppe \\ \hline
$l_{rotor}$  & 0.1775 [m] & Länge vom Drehpunkt der Rotorbaugruppe zum Rotor \\ \hline
$l_{mmp}$ & 0.010029 [m] & Länge von Aufhängepunkt zum Massenmittelpunkt \\ \hline
\end{tabular}
\end{table}

Bei den jeweiligen Trägheiten $$I_{\alpha}, I_{\beta}, I_{\gamma}$$ die aus dem SolidWorks Modell extrahiert 
worden sind, handelt es sich um die addierten Trägheitsmomente der, für die jeweilige Achsrotation relevante, angenommenen Starrkörper. 

Letztendlich ergeben sich folgende Differentialgleichungen für die drei Achsen:

\begin{equation}
\ddot{\gamma} = \frac{(F_{\mathrm{vorne}} - F_{\mathrm{hinten}}) * l_{rotor}}{I_{\gamma}}
\end{equation}

\begin{equation}
\ddot{\beta} = \frac{(F_{\mathrm{vorne}} + F_{\mathrm{hinten}}) * l_{\mathrm{heli}} * \cos(\gamma) - F_{\mathrm{g}} * l_{mmp} * \cos(\beta)}{I_{\beta}}
\end{equation}

\begin{equation}
\ddot{\alpha} = \frac{-(F_{\mathrm{vorne}} + F_{\mathrm{hinten}}) * l_{\mathrm{heli}} * \sin(\gamma)}{I_{\alpha}}
\end{equation}

Mit
\begin{equation}
F_{\mathrm{g}} = m_{\mathrm{mmp}}*g
\label{eq:F_g}
\end{equation}
wobei $m_{\mathrm{ges}}$ die Gesamtmasse des betrachteten Starrkörpers und $g\approx 9.81\ \mathrm{m/s^2}$ die Erdbeschleunigung ist.

\section{Kommentare und Ausblick auf L2}
Obwohl die Modellierung des Helikopters viele Vereinfachungen und Annahmen beinhaltet, erscheinen die extrahierten Modellgleichungen 
plausibel. Als besonders nützlich erwies sich die Extrahierung der Massenträgheiten aus dem CAD Modell.
Dadurch müssen in der anschließenden Modellidentifizierung nur noch wenige Parameter
extrahiert werden. Dies ist vor allem sehr angenehm, da die Identifizierung von Massenträgheiten sich als recht 
schwierig und fehleranfällig erwartet wird. Dadurch müssen prinzipiell mit nächsten Labor nur noch die Motor-Kraft Kennlinien 
bei verschiedenen Spannungsstufen ermittelt werden. Anschließend kann in L2 eventuell dann bereits mit Aufgaben der H2, also Linearisierung
der Systemgleichungen begonnen werden. Des Weiteren kann noch eine Validierung des Modells durch Simulationen in Simulink erfolgen, um die Übereinstimmung mit dem realen Systemverhalten zu überprüfen.
Diese Validierung kann noch im laufenden Prozess erfolgen.


\end{document}